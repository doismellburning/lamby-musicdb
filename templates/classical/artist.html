{% extends "base.html" %}

{% block headtitle %}{{ artist.long_name }} - {{ block.super }}{% endblock %}

{% block container %}

<h1>{{ artist.long_name }}</h1>

{% if artist.works.exists %}
  {% if artist.performances.exists %}
    <h3>Compositions</h3>
  {% endif %}
<ul>
{% for work in works %}
  <li><a href="{% url classical-work artist.slug work.slug %}">{{ work }}</a></li>
{% endfor %}
</ul>

{% endif %}

{% if artist.performances.exists %}
  {% if artist.works.exists %}
    <h3>Recordings</h3>
  {% endif %}

  {% regroup artist.performances_by_composer by recording.work.composer as groups %}
  {% for group in groups %}
    <h4>{{ group.grouper }}</h4>
    <ul>
    {% for performance in group.list %}
    {% with performance.recording.work as work %}
      <li>
        <a href="{{ performance.recording.get_absolute_url }}">{{ work }}</a>
        {% ifnotequal artist.instruments.count 1 %}
          ({{ performance.instrument.noun|lower }})
        {% endifnotequal %}
      </li>
    {% endwith %}
    {% endfor %}
    </ul>
  {% endfor %}

{% endif %}

{% if artist.works.exists %}
{% with artist.previous_composer as previous %}
{% with artist.next_composer as next %}
<br/>
<br/>
<div class="well row">
  <div class="col-md-6">
    {% if previous %}
      &laquo; <a href="{{ previous.get_absolute_url }}">{{ previous }}</a>
    {% else %}
      &nbsp;
    {% endif %}
  </div>
  <div class="col-md-6 text-right">
    {% if next %}
      <a href="{{ next.get_absolute_url }}">{{ next }}</a> &raquo;
    {% endif %}
  </div>
</div>
{% endwith %}
{% endwith %}
{% endif %}

{% endblock %}
